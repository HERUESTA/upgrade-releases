# Faraday 2.14.1 ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒãƒ¼ãƒˆ

- å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 2.14.0 â†’ 2.14.1
- ãƒªãƒªãƒ¼ã‚¹æ—¥: 2026å¹´2æœˆ8æ—¥
- ãƒªãƒªãƒ¼ã‚¹ç¨®åˆ¥: é€šå¸¸ãƒªãƒªãƒ¼ã‚¹

---

## æ¦‚è¦

| åˆ†é¡ | ä»¶æ•° | å½±éŸ¿ | å‚ç…§URL |
|------|------|-------------------|---------|
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿®æ­£ | 1ä»¶ | ãƒ—ãƒ­ãƒˆã‚³ãƒ«ç›¸å¯¾URLã‚’å¤–éƒ¨å…¥åŠ›ã‹ã‚‰å—ã‘å–ã£ã¦ã„ãªã‘ã‚Œã°ç›´æ¥ã®å½±éŸ¿ãªã—ã€‚ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ¨å¥¨ | [GHSA-33mh-2634-fwr2](https://github.com/lostisland/faraday/commit/a6d3a3a0bf59c2ab307d0abd91bc126aef5561bc) |
| ãƒã‚°ä¿®æ­£ï¼ˆRubyæœ¬ä½“ï¼‰ | 0ä»¶ | - | |
| YJITä¿®æ­£ | 0ä»¶ | - | |
| CI/ã‚¤ãƒ³ãƒ•ãƒ© | 2ä»¶ | ãªã—ï¼ˆFaradayã®CI/è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ï¼‰ | |
| ã‚³ãƒ¼ãƒ‰æ•´ç† | 5ä»¶ | ãªã—ï¼ˆmdãƒ•ã‚¡ã‚¤ãƒ«è¿½åŠ ãƒ»åå‰ç©ºé–“ä¿®æ­£ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒãƒ³ãƒ—ï¼‰ | |

---

## ã‚¹ãƒ†ãƒƒãƒ—1: ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ

- https://github.com/lostisland/faraday/releases
- https://github.com/lostisland/faraday/releases/tag/v2.14.1
- https://github.com/lostisland/faraday/compare/v2.14.0...v2.14.1

---

## ã‚¹ãƒ†ãƒƒãƒ—2: ãƒã‚±ãƒƒãƒˆè©³ç´°

### âš ï¸ å½±éŸ¿ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã‚‚ã®

### â„¹ï¸ ç’°å¢ƒä¾å­˜ã®ä¿®æ­£
#### Bump actions/checkout from 5 to 6 by
https://github.com/lostisland/faraday/pull/1655
- Node.jsã®24ã¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã‚ˆã‚Šãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã™ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’5â†’6ã«å¤‰æ›´
  - å½±éŸ¿ãªã—ï¼šèªè¨¼æƒ…å ±ã®æ¼æ´©ãŒNode.jsã§èµ·ã“ã‚ŠCIã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã€‚faradayã®CIãªã®ã§ã€è‡ªåˆ†ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯å½±éŸ¿ãªã—

### â„¹ï¸ é€šå¸¸ã¯å½±éŸ¿ãªã—ã®ä¿®æ­£

#### @Copilot ã«ã‚ˆã‚‹ Claudeã€Cursorã€GitHub Copilot å‘ã‘ã®åŒ…æ‹¬çš„ãª AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
https://github.com/lostisland/faraday/pull/1642
- Claude, copilot, cursorã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ.mdã®è¿½åŠ 
  - mdãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ ã®ãŸã‚å½±éŸ¿ãªã—

#### @Copilot ã«ã‚ˆã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° ãƒ—ãƒ©ãƒ³ã® RFC ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
https://github.com/lostisland/faraday/pull/1644
- plan.mdã®è¿½åŠ 
  - mdãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ ã®ãŸã‚å½±éŸ¿ãªã—

#### Explicit top-level namespace reference
https://github.com/lostisland/faraday/pull/1657
- æ˜ç¤ºçš„ã«åå‰ç©ºé–“ã‚’ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã‚’å‚ç…§ã™ã‚‹ã‚ˆã†ã«ä¿®æ­£
  - å½±éŸ¿ãªã—ï¼šæ˜ç¤ºçš„ã«ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ï¼ˆrubyï¼‰ã®ENCODINGã‚’å‚ç…§ã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ã—ãŸã®ã¿ãªã®ã§ã€å½±éŸ¿ãªã—
    - Faraday::Encoding ãŒå­˜åœ¨ã™ã‚‹ç’°å¢ƒã§ã€Faradayå´ã®ã‚³ãƒ¼ãƒ‰ãŒã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã‚’é˜²ãä¿®æ­£
      - Zeitwerkç­‰ã®è‡ªå‹•èª­ã¿è¾¼ã¿ã§ Faraday::Encoding ãŒå¶ç„¶è§£æ±ºã•ã‚Œã¦ã—ã¾ã£ãŸã¨ãã€Faradayã®logger
  formatterãŒå£Šã‚Œãªã„ã‚ˆã†ã«ã—ãŸã¨ã„ã†é˜²å¾¡çš„ãªä¿®æ­£
  - ğŸ“åå‰ç©ºé–“ï¼šRubyã§ã¯ã‚¯ãƒ©ã‚¹ã‚„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¸­ã«ã‚¯ãƒ©ã‚¹ã‚’å…¥ã‚Œå­ã«ã§ãã‚‹ã“ã¨
  - ğŸ“Zeiwerkï¼šRails 6ä»¥é™ã§æ¨™æº–ã«ãªã£ãŸè‡ªå‹•èª­ã¿è¾¼ã¿ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
  - ğŸ“autoloadï¼šRubyã®çµ„ã¿è¾¼ã¿æ©Ÿèƒ½ã§ã€ã‚¯ãƒ©ã‚¹ã‚„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒåˆã‚ã¦ä½¿ã‚ã‚ŒãŸã¨ãã«è‡ªå‹•ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ä»•çµ„ã¿ï¼ˆä½¿ã‚ã‚Œã‚‹ã¾ã§èª­ã¿è¾¼ã¾ãªã„ï¼‰


## ã‚¹ãƒ†ãƒƒãƒ—3: ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«è¼‰ã£ã¦ã„ãªã„ã‚³ãƒŸãƒƒãƒˆ
### âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿®æ­£

#### Merge commit from forkï¼ˆGHSA-33mh-2634-fwr2ï¼‰
https://github.com/lostisland/faraday/commit/a6d3a3a0bf59c2ab307d0abd91bc126aef5561bc
- ãƒ—ãƒ­ãƒˆã‚³ãƒ«ç›¸å¯¾URLï¼ˆ`//evil.com/path`ï¼‰ãŒ`build_exclusive_url`ã®ã‚¬ãƒ¼ãƒ‰ã‚’ãƒã‚¤ãƒ‘ã‚¹ã—ã€æ¥ç¶šå…ˆã®ãƒ›ã‚¹ãƒˆãŒæ”»æ’ƒè€…ã®æŒ‡å®šã—ãŸURLã«æ›¸ãæ›ã‚ã‚‹è„†å¼±æ€§ã®ä¿®æ­£
  - `//` ã§å§‹ã¾ã‚‹URLã«ã‚‚ `./` ã‚’ä»˜ä¸ã—ã¦authorityã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç„¡åŠ¹åŒ–
- âš ï¸å½±éŸ¿ã‚ã‚Šï¼šFaradayã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ¨å¥¨

### â„¹ï¸ CI/ã‚¤ãƒ³ãƒ•ãƒ©ï¼ˆå½±éŸ¿ãªã—ï¼‰

| ã‚³ãƒŸãƒƒãƒˆ | å†…å®¹ |
|---------|------|
| `51a49bc` | Claudeã«ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’èª­ã¾ã›ã‚‹è¨­å®š & `.ai/PLAN.md` ã®gitignoreå¯¾å¿œ |

### â„¹ï¸ ã‚³ãƒ¼ãƒ‰æ•´ç†ï¼ˆå½±éŸ¿ãªã—ï¼‰

| ã‚³ãƒŸãƒƒãƒˆ | å†…å®¹ |
|---------|------|
| `16cbd38` | Version bump to 2.14.1 |

## ã‚¹ãƒ†ãƒƒãƒ—4ãƒ»5: ã‚³ãƒ¼ãƒ‰æ·±æ˜ã‚Š

#### Merge commit from forkï¼šãƒ—ãƒ­ãƒˆã‚³ãƒ«ç›¸å¯¾URLã®ã‚¬ãƒ¼ãƒ‰ã‚’ãƒã‚¤ãƒ‘ã‚¹ã™ã‚‹è„†å¼±æ€§

#### ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
```ruby
# spec/faraday/connection_spec.rb
# ãƒ—ãƒ­ãƒˆã‚³ãƒ«ç›¸å¯¾URLã§ãƒ›ã‚¹ãƒˆãŒæ›¸ãæ›ã‚ã‚‰ãªã„ã“ã¨ã‚’æ¤œè¨¼
context 'with protocol-relative URL (GHSA-33mh-2634-fwr2)' do
  # åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³: //evil.com/path ã§ãƒ›ã‚¹ãƒˆãŒä¹—ã£å–ã‚‰ã‚Œãªã„ã‹
  it 'does not allow host override with //evil.com/path' do
    conn.url_prefix = 'http://httpbingo.org/api'
    # 
    uri = conn.build_exclusive_url('//evil.com/path')
    # hostãƒ¡ã‚½ãƒƒãƒ‰ => uriã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ãƒ›ã‚¹ãƒˆåã‚’æŠœãå‡ºã™
    expect(uri.host).to eq('httpbingo.org')
  end

  # ãƒãƒ¼ãƒˆä»˜ã: //evil.com:8080/path ã§ã‚‚é˜²ã’ã‚‹ã‹
  it 'does not allow host override with //evil.com:8080/path' do
    conn.url_prefix = 'http://httpbingo.org/api'
    uri = conn.build_exclusive_url('//evil.com:8080/path')
    expect(uri.host).to eq('httpbingo.org')
  end

  # èªè¨¼æƒ…å ±ä»˜ã: //user:pass@evil.com/path ã§ã‚‚é˜²ã’ã‚‹ã‹
  it 'does not allow host override with //user:pass@evil.com/path' do
    conn.url_prefix = 'http://httpbingo.org/api'
    uri = conn.build_exclusive_url('//user:pass@evil.com/path')
    expect(uri.host).to eq('httpbingo.org')
  end

  # ãƒˆãƒªãƒ—ãƒ«ã‚¹ãƒ©ãƒƒã‚·ãƒ¥: ///evil.com ã§ã‚‚é˜²ã’ã‚‹ã‹
  it 'does not allow host override with ///evil.com' do
    conn.url_prefix = 'http://httpbingo.org/api'
    uri = conn.build_exclusive_url('///evil.com')
    expect(uri.host).to eq('httpbingo.org')
  end

  # æ—¢å­˜ã®æ­£å¸¸å‹•ä½œãŒå£Šã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèªï¼ˆãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆï¼‰
  it 'still allows single-slash absolute paths' do
    conn.url_prefix = 'http://httpbingo.org/api'
    uri = conn.build_exclusive_url('/safe/path')
    expect(uri.host).to eq('httpbingo.org')
    expect(uri.path).to eq('/safe/path')
  end
end
```

- æœŸå¾…å‹•ä½œ: `//evil.com` ã‚’æ¸¡ã—ã¦ã‚‚ãƒ›ã‚¹ãƒˆã¯å…ƒã® `httpbingo.org` ã®ã¾ã¾
- ä¿®æ­£å‰: `//evil.com` ãŒauthorityå‚ç…§ã¨ã—ã¦è§£é‡ˆã•ã‚Œã€ãƒ›ã‚¹ãƒˆãŒ `evil.com` ã«æ›¸ãæ›ã‚ã‚‹
- ä¿®æ­£å¾Œ: `//evil.com` ã¯ `./` ãŒä»˜ä¸ã•ã‚Œã¦ãƒ‘ã‚¹ã¨ã—ã¦æ‰±ã‚ã‚Œã€ãƒ›ã‚¹ãƒˆã¯å¤‰ã‚ã‚‰ãªã„

#### æœ¬ä½“ã‚³ãƒ¼ãƒ‰
```diff
# lib/faraday/connection.rb - build_exclusive_url ãƒ¡ã‚½ãƒƒãƒ‰
- url = "./#{url}" if url.respond_to?(:start_with?) && !url.start_with?('http://', 'https://', '/', './', '../')
+ url = "./#{url}" if url.respond_to?(:start_with?) &&
+                      (!url.start_with?('http://', 'https://', '/', './', '../') || url.start_with?('//'))
```

- ä¿®æ­£ã®ãƒã‚¤ãƒ³ãƒˆ: ã‚¬ãƒ¼ãƒ‰æ¡ä»¶ã« `|| url.start_with?('//')` ã‚’è¿½åŠ ã€‚`//` ã§å§‹ã¾ã‚‹URLã¯ `/` ã®ãƒã‚§ãƒƒã‚¯ã‚’ã™ã‚ŠæŠœã‘ã¦ã„ãŸãŸã‚ã€æ˜ç¤ºçš„ã« `//` ã‚’æ¤œå‡ºã—ã¦ `./` ã‚’ä»˜ä¸ã™ã‚‹ã‚ˆã†ã«ã—ãŸ

#### ã‚³ãƒŸãƒƒãƒˆã®çµŒç·¯
1. `a6d3a3a` â€” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿®æ­£ï¼ˆforkã‹ã‚‰ã®ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã€1ã‚³ãƒŸãƒƒãƒˆã®ã¿ï¼‰

---

## ğŸ“ ç”¨èªãƒ¡ãƒ¢

- **åå‰ç©ºé–“**: Rubyã§ã¯ã‚¯ãƒ©ã‚¹ã‚„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¸­ã«ã‚¯ãƒ©ã‚¹ã‚’å…¥ã‚Œå­ã«ã§ãã‚‹ã“ã¨ã€‚`::` ã‚’ä»˜ã‘ã‚‹ã¨ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã‹ã‚‰å‚ç…§ã™ã‚‹
- **Zeitwerk**: Rails 6ä»¥é™ã§æ¨™æº–ã«ãªã£ãŸè‡ªå‹•èª­ã¿è¾¼ã¿ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã‹ã‚‰ã‚¯ãƒ©ã‚¹åã‚’æ¨æ¸¬ã—ã¦è‡ªå‹•çš„ã«èª­ã¿è¾¼ã‚€
- **autoload**: Rubyã®çµ„ã¿è¾¼ã¿æ©Ÿèƒ½ã§ã€ã‚¯ãƒ©ã‚¹ã‚„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒåˆã‚ã¦ä½¿ã‚ã‚ŒãŸã¨ãã«è‡ªå‹•ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ä»•çµ„ã¿
- **ãƒã‚¤ãƒ‘ã‚¹**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã‚’ã™ã‚ŠæŠœã‘ã‚‹ã“ã¨
- **ãƒ—ãƒ­ãƒˆã‚³ãƒ«ç›¸å¯¾URL**: `//example.com` ã®ã‚ˆã†ã«ã‚¹ã‚­ãƒ¼ãƒ ï¼ˆhttp/httpsï¼‰ã‚’çœç•¥ã—ãŸURLã€‚URIã®ä»•æ§˜ã§ã¯ `//` ã¯authorityï¼ˆãƒ›ã‚¹ãƒˆï¼‰ã®é–‹å§‹ã‚’æ„å‘³ã™ã‚‹
- **SSRFï¼ˆServer-Side Request Forgeryï¼‰**: ã‚µãƒ¼ãƒãƒ¼ã«æ„å›³ã—ãªã„ãƒ›ã‚¹ãƒˆã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã›ã‚‹æ”»æ’ƒæ‰‹æ³•
- **authority**: URIã®æ§‹æˆè¦ç´ ã®ä¸€ã¤ã§ã€ãƒ›ã‚¹ãƒˆåãƒ»ãƒãƒ¼ãƒˆãƒ»èªè¨¼æƒ…å ±ã‚’å«ã‚€éƒ¨åˆ†ï¼ˆä¾‹: `user:pass@example.com:8080`ï¼‰
- **ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ**: ä¿®æ­£ã«ã‚ˆã£ã¦æ—¢å­˜ã®æ­£å¸¸å‹•ä½œãŒå£Šã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãƒ†ã‚¹ãƒˆ
- **RFCï¼ˆã“ã®æ–‡è„ˆï¼‰**: Request for Commentsã€‚ã“ã“ã§ã¯IETFã®æ­£å¼ä»•æ§˜ã§ã¯ãªãã€æ„è¦‹å‹Ÿé›†ã®ãŸã‚ã®ææ¡ˆæ–‡æ›¸ã®æ„å‘³